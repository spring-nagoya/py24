<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flask + ajax</title>
    <!-- ajax起動のため、jQueryの読み込み -->
    <!-- <script src="/static/js/jquery/jquery-3.6.4.js"></script> -->
    <script src="{{ url_for('static', filename='js/jquery/jquery-3.6.4.js')}} "></script>
    <!-- scriptタグでajax実行 -->
    <!-- 起動パス:/call_ajax -->
    <script>
        function fncSubmit(){
            //入力データを渡す準備
            var frmData = new FormData();
            frmData.append('fdata',$('#fdata').val());
            //ajax実行
            $.ajax({
                url: '{{ url_for("call_ajax") }}',
                type: 'post',
                data: frmData,
                processData: false,
            })
            .done((data) => {
                console.log('done');
                console.log(data);
            })
            .fail((xhr) => {
                console.log('fail');
            })
            .always((xhr,data) => {
                console.log('always');
            });
            
            //submitイベントを停止させる
            return false;
        }
    </script>
</head>
<body>
    <div id="inputForm">
        <form action="{{ url_for('call_ajax') }}" method="get" onsubmit="return fncSubmit()">
            <input type="text" id="fdata">
            <input type="submit" value="送信">
        </form>
    </div>
    <div id="outputForm">
        <div id="results"></div>
    </div>
</body>
</html>